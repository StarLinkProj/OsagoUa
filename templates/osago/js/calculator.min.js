jQuery(document).ready(function(){function e(e,a,r,i,c,l,o,u){var s=0,y=1,d=1,p=1.5,j=1,Q=n(),v=t();return v.z6=1.5,"t1"==e&&(1==c&&(d=1.4),"b1"==r?y=1:"b2"==r?y=1.14:"b3"==r?y=1.18:"b4"==r&&(y=1.82)),"t5"==e&&("a1"==r?y=.34:"a2"==r&&(y=.68)),"t4"==e&&("c1"==r?y=2:"c2"==r&&(y=2.18)),"t3"==e&&("d1"==r?(y=2.55,1==c&&(d=1.4)):"d2"==r&&(y=3)),"t2"==e&&("f"==r?y=.34:"e"==r&&(y=.5)),s=180*y*v[a]*d*p*j*Q[u],(Math.round(100*s)/100).toFixed(2)}function a(e,a,r,i,c,l,o,u){var s=0,y=1,d=1,p=1.5,j=1,Q=n(),v=t();return"3less"==i&&(p=1.57),"t1"==e&&(1==c&&(d=1.4),"3less"==i&&(p=1.62),"z6"==a&&0==c&&(p=1.76),"b1"==r?y=1:"b2"==r?y=1.14:"b3"==r?y=1.18:"b4"==r&&(y=1.82)),"t5"==e&&("3less"==i&&(p=1.7),"a1"==r?y=.34:"a2"==r&&(y=.68)),"t4"==e&&("c1"==r?y=2:"c2"==r&&(y=2.18)),"t3"==e&&("d1"==r?(y=2.55,1==c&&(d=1.4)):"d2"==r&&(y=3)),"t2"==e&&("f"==r?y=.34:"e"==r&&(y=.5)),s=180*y*v[a]*d*p*j*Q[u],(Math.round(100*s)/100).toFixed(2)}function n(){return{.5:.15,1:.2,2:.3,3:.4,4:.5,5:.6,6:.7,7:.75,8:.8,9:.85,10:.9,11:.95,12:1}}function t(){return{z1:4.8,z2:2.5,z3:3.4,z4:2.8,z5:2.2,z6:1.6,"z6.5":1.5,z7:3}}function r(){var e=jQuery("#regCity").val(),a=jQuery("input[name='isTaxi']:checked").val(),n=jQuery("#year").val(),t=jQuery("#troubleFreeExperience").val(),r=jQuery("#periodOfInsurance").val();return""==e||void 0===a||""==n||""==t||""==r?(""==e?jQuery("#regCity").next(".calc-danger").css("display","inline-block"):jQuery("#regCity").next(".calc-danger").hide(),void 0===a?jQuery("input[name='isTaxi']").parent().parent().next(".calc-danger").css("display","inline-block"):jQuery("input[name='isTaxi']").parent().parent().next(".calc-danger").hide(),""==n?jQuery("#year").next(".calc-danger").css("display","inline-block"):jQuery("#year").next(".calc-danger").hide(),""==t?jQuery("#troubleFreeExperience").next(".calc-danger").css("display","inline-block"):jQuery("#troubleFreeExperience").next(".calc-danger").hide(),""==r?jQuery("#periodOfInsurance").next(".calc-danger").css("display","inline-block"):jQuery("#periodOfInsurance").next(".calc-danger").hide(),!1):(jQuery(".calc-danger").hide(),!0)}jQuery("#clientPhone").mask("(999) 999-99-99"),jQuery(".disabledA").click(function(){return jQuery(this).hasClass("disabledA")?!1:void 0}),jQuery("#carType").on("change",function(){var e=jQuery(this).val(),a="";"t1"==e?a='<option value="b1">B1 — до 1600 куб. см включительно</option><option value="b2">B2 — 1601 - 2000 куб. см</option><option value="b3">B3 — 2001 - 3000 куб. см</option><option value="b4">B4 — больше 3000 куб. См</option>':"t2"==e?a='<option value="f">F — к легковому автомобилю</option><option value="e">E — грузовой или полуприцеп</option>':"t3"==e?a='<option value="d1">D1 — до 20 чел. включительно</option><option value="d2">D2 — больше 20 чел.</option>':"t4"==e?a='<option value="c1">C1 — до 2 т включительно</option><option value="c2">C2 — больше 2 т</option>':"t5"==e&&(a='<option value="a1">A1 — до 300 куб. см включительно</option><option value="a2">A2 — больше 300 куб. см</option>'),jQuery("#category").empty().append(a)}),jQuery(".calculatePrice").click(function(){var n=r();if(n){jQuery(".nav-tabs li").first().removeClass("active"),jQuery("#calcTab").removeClass("active"),jQuery("#resultsTab").addClass("active"),jQuery(".resultsTab a").removeClass("disabledA").parent().addClass("active");var t={carType:jQuery("#carType option:selected").text(),city:jQuery("#city option:selected").text(),category:jQuery("#category option:selected").text(),experience:jQuery("#experience option:selected").text(),isTaxi:jQuery("input[name=isTaxi]:checked").parent().text(),year:jQuery("#year option:selected").text(),troubleFreeExperience:jQuery("#troubleFreeExperience option:selected").text(),periodOfInsurance:jQuery("#periodOfInsurance option:selected").text()},i=jQuery("#carType").val(),c=jQuery("#city").val(),l=jQuery("#category").val(),o=jQuery("#experience").val(),u=jQuery("input[name=isTaxi]:checked").val(),s=jQuery("#year").val(),y=jQuery("#troubleFreeExperience").val(),d=jQuery("#periodOfInsurance").val(),p=e(i,c,l,o,u,s,y,d),j=a(i,c,l,o,u,s,y,d);jQuery(".illichEnsCompanyPrice").text(p),jQuery(".evroEnsAlPrice").text(j),jQuery("#calcJsonData").val(JSON.stringify(t))}}),jQuery(".chooseInsCompany").click(function(){var e=jQuery(this).data("email"),a=jQuery(this).data("class"),n=jQuery(this).data("companyname"),t=jQuery(this).parent().parent().find(".price").children().text();jQuery(".nav-tabs li").removeClass("active"),jQuery("#resultsTab").removeClass("active"),jQuery("#contactForm").addClass("active"),jQuery(".nav-tabs li a").removeClass("disabledA"),jQuery(".nav-tabs li.contactForm").addClass("active"),jQuery("#emailWhomSend").val(e),jQuery("#insCompanyClass").val(a),jQuery("#insCompanyName").val(n),jQuery("#insCompanyPrice").val(t),jQuery(".contactInfoDiv div").hide(),jQuery("."+a).show()}),jQuery("#sendClientInfoForm").submit(function(e){var a=jQuery("#clientName").val(),n=jQuery("#clientPhone").val(),t=jQuery("#clientEmail").val();if(""==a||""==n||!n.match(/[+)\-(\s\d]{10,20}/)||""==t||!t.match(/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/))return""==a?jQuery("#clientName").next(".calc-danger").css("display","inline-block"):jQuery("#clientName").next(".calc-danger").hide(),""!=n&&n.match(/[+)\-(\s\d]{10,20}/)?jQuery("#clientPhone").next(".calc-danger").hide():jQuery("#clientPhone").next(".calc-danger").css("display","inline-block"),""!=t&&t.match(/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/)?jQuery("#clientEmail").next(".calc-danger").hide():jQuery("#clientEmail").next(".calc-danger").css("display","inline-block"),!1;jQuery(".calc-danger").hide();var r={toEmail:jQuery("#emailWhomSend").val().replace(/\\@/,"@"),toName:jQuery("#insCompanyName").val(),clientName:a,clientPhone:n,clientEmail:t,price:jQuery("#insCompanyPrice").val(),calcData:jQuery("#calcJsonData").val()};jQuery.ajax({type:"POST",url:"/modules/mod_calculator/tmpl/sendMail.php",data:r,success:function(a){"ok"==a&&jQuery(".clientContactForm").empty().append('<div class="success-sent-data">Данные успешно отправлены! <br />Представитель свяжется с Вами в ближайшее время</div>'),e.preventDefault()}}),e.preventDefault()})});